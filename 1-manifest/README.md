---
title: 1. Ajout d'un Web App Manifest
lang: fr
---

# Etape 1 : Ajout d'un Web App Manifest

Commençons par créer le fichier manifest. Ce fichier est défini ainsi par [MDN](https://developer.mozilla.org/en-US/docs/Web/Manifest):

> The web app manifest provides information about an application (such as name, author, icon, and description) in a JSON text file.

En français; le manifeste d'application web fournit des informations sur l'application (comme son nom, son icône et sa description) dans un fichier JSON.

La présence d'un manifeste procure également d'autres avantages. En voici quelques uns:

* Il permet à certains navigateurs d'ajouter au bureau un raccourci vers la PWA
* Il permet à la PWA d'être référencée par certains moteurs de recherche et reconnue par le store [Windows](https://docs.microsoft.com/en-us/microsoft-edge/progressive-web-apps).
* Il permet d'afficher un écran initial (splashscreen) lors de l'ouverture de la PWA

Le fichier JSON constitiaunt le manifest contient plusieurs champs. Il est recommandé de renseigner un maximum de champs afin de permettre à la PWA d'être reconnue pas les navigateurs et les stores. Voici la liste des attributs du manifeste [source](https://medium.com/@subodhgarg/web-app-manifest-file-make-your-web-app-installable-b5fcdb2919b9), [source](https://developer.mozilla.org/fr/docs/Web/Manifest):

* name — affiché sur le splashscreen
* short_name — affiché en dessous du raccourci sur le bureau ou l'écran d'accueil
* description — une description générale de l'application. On renseigne notamment les fonctions de la PWA.
* start_url — L'URL qui est chargée en premier quand on ouvre l'application depuis son raccourci sur le bureau ou l'écran d'accueil
* scope — les pages du site qu'on font partie de l'expérience PWA. "." inclue tout ce qui se situe dans l'arborescence de manifeste. Donc, il est plus pertinent de placer ce dernier à la racine du site
* background_color — L'arrière-plan du splashscreen
* theme_color — la couleur de la status bar dans le cas où elle est affichée
* display — spécifie le mode d'affichage. Voici les différents modes disponibles triés par ordre de fallback. La valeur par défaut étant ‘browser’.
  * fullscreen: Toute la zone d'affichage disponible est utilisée et aucun agent utilisateur chrome n'est montré.
  * ‘standalone’, Comportement similaire a une application native. Cela peut inclure que l'application ait une fenêtre différente, sa propre icône dans le lanceur d'applications, etc. Dans ce mode, l'agent utilisateur va exclure les élements d'interface qui permettent de contrôler la navigation mais peut inclure d'autres éléments comme une barre de statut.
  * ‘minimal-ui’, L'application va ressembler et se comporter comme une application autonome, mais elle aura quelques élements d'interface permettant de contrôler la navigation. Les éléments varient en fonction du navigateur web.
  * ‘browser’. L'application s'ouvre dans un nouvel onglet ou une nouvelle fenêtre du navigateur, en fonction du navigateur et de la plateforme
* orientation — pour forcer une ou orientation particulière
  * ‘portrait-primary’: uniquement en portrait.
  * Autres options : landscape, any, portrait, etc.
* dir — la direction du texte. ‘ltr’(default) means left to right.
* lang — primary application language. ‘en-US’(default).
* related_applications — link to related native app(android app). Omit if native app not present.
* icons — array of image objects which contains different sizes of icon you want to show on home screen. Recommended sizes : 48, 96, 144, 192, 256, 384, 512. Your device will choose the best icon automatically.

Comme le manifeste d'application web est un fichier texte, il est possible de l'écrire à la main à l'aide d'un VIM ou d'un bloc notes. On peut également utiliser un outil qui simplifie sa création. Plusieurs outils sont disponibles sur internet:

* [https://app-manifest.firebaseapp.com/](https://app-manifest.firebaseapp.com/)
* [Web App Manifest Generator](https://tomitm.github.io/appmanifest/).

Using the tool, try to generate the following `JSON` file or a similar one.

```json
{
  "name": "PWA from scratch",
  "short_name": "PWA from 0",
  "lang": "fr",
  "start_url": "/",
  "display": "fullscreen",
  "theme_color": "#c2f442",
  "icons": [
    {
      "src": "pwa0-64.png",
      "sizes": "64x64"
    },
    {
      "src": "pwa0-128.png",
      "sizes": "128x128"
    },
    {
      "src": "pwa0-512.png",
      "sizes": "512x512"
    }
  ]
}
```

Put that JSON in a file called `manifest.json` and place it in the root of your website along the different icons. Maybe you can find your icons in [FLATICON](https://www.flaticon.com/).

We will also update the HTML head with the html generated by the tool. Of course the most important tag is `<link rel="manifest" href="manifest.json">`.

```html
<link rel="manifest" href="manifest.json">

<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="application-name" content="PWA from scratch">
<meta name="apple-mobile-web-app-title" content="PWA from scratch">
<meta name="msapplication-starturl" content="/index.html">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
```

Let's try to open the app on a mobile phone browser. Enter the url `MACHINE_IP:PORT`, tap the menu button of your browser and look for the option **Add to home screen**

![Add to home screen](./readme_assets/pwa_install_menu.jpg 'dd to home screen')

By choosing this option, you will end up with a link of you PWA on your home screen.

![PWA bookmark](./readme_assets/pwa_bookmark.jpg 'PWA bookmark')

Next, tap on the shortcut. you will see a small loading screen. It can be customized using the `theme_color` and `icons` properties.

![Splash-screen](./readme_assets/pwa_splashscreen.jpg 'Splash-screen')

Right after that, the fullscreen PWA is shown with all its glory thanks to the `"display": "fullscreen"` option in the manifest.

![PWA run from bookmark](./readme_assets/pwa_chrome_fullscreen.jpg 'PWA run from bookmark')

Yaaaay ! The PWA is now added to my home-screen :heart_eyes:. However, there is no caching yet :unamused: (try to open the app in plane mode). Let's deal with that in the next step :rocket:.
